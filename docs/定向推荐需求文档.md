# 定向推荐功能需求文档

## 1. 项目背景
当前APP【发现】模块支持6大类别：资产推介、竞拍服务商、资金方、明星经理、专项招募等。现需新增**"定向推荐"**类型，实现对特定人群的精准项目推送。

---

## 2. 核心功能需求

### 2.1 发现模块配置
- 在运营中心【发现配置】中新增"定向推荐"类型
- 支持置顶排序（新类别优先展示在列表最上方）
- 多端同步：APP、小程序、H5、PC端

### 2.2 内容发布功能

#### 2.2.1 发布入口
- 运营中心新增【定向推荐】发布页面
- 每条信息独立发布（非批量）
- 支持预览功能（移动端+PC端效果预览）

#### 2.2.2 信息字段
| 字段类型 | 说明 | 必填 |
|---------|------|------|
| 资产简介 | 文字描述 | 是 |
| 资金偏好 | 夹层/劣后等 | 是 |
| 资金规模 | 金额范围 | 是 |
| 时效要求 | 募集期限 | 是 |
| 附件 | PDF文件（限制1个） | 是 |
| 白名单 | 可见人员列表 | 是 |

#### 2.2.3 附件处理逻辑
- **格式限制**：仅支持PDF（前台自行将Word/PPT转为PDF）
- **水印处理**：系统自动添加水印（手机号+姓名，未实名用户显示手机号+ID）
- **展示方式**：PDF转长图后展示（不支持下载，仅可截图）
- **在线预览**：支持H5、小程序、APP内预览

### 2.3 白名单管理

#### 2.3.1 导入方式
- 支持批量导入（Excel/手动输入）
- 字段：机构名称、姓名、手机号
- **注意**：白名单数据仅用于展示和权限校验，不与系统组织架构关联

#### 2.3.2 编辑规则
- **仅可编辑**：白名单人员（增删改）
- **不可编辑**：已发布的标题、内容、附件等核心字段
- 每次白名单变更需重新走审批流程

#### 2.3.3 权限校验
- 用户登录后校验是否在白名单手机号列表中
- 已注册用户：正常展示
- 未注册用户：引导注册流程，注册后自动获得查看权限
- **不实名校验**：仅需手机号匹配即可查看

### 2.4 审批流程
- 发布/编辑白名单 → 提交审核 → 领导审批（于总）
- 审批通过后方可推送/展示
- 支持撤回功能（撤回后项目下架）

### 2.5 推送机制

#### 2.5.1 推送渠道
- **短信推送**：短链形式（需申请短信模板）
- **APP推送**：系统通知栏推送

#### 2.5.2 推送内容
- 文案示例："您有一条新的项目推荐，请点击查看"
- 落地页：H5【发现】列表页（非具体项目页）
- 短链逻辑：
  - 唤起H5 → 登录校验 → 白名单校验 → 展示内容
  - 转发无效（登录账号不在白名单中则无法查看）

### 2.6 有效期管理
- 支持设置项目有效期（开始时间-结束时间）
- 到期自动下架（用户端不可见）
- 支持手动撤回/下架

### 2.7 运营中心管理
- 定向推荐列表页（所有发布记录）
- 操作：预览、修改白名单、撤回、查看状态
- 权限：运营团队可配置（需单独开权限）

---

## 3. 技术要点

### 3.1 多端适配
| 端 | 实现方式 | 备注 |
|---|---------|------|
| APP | 原生页面 | 主入口在【发现】模块 |
| 小程序 | 原生页面 | 与APP共用接口 |
| H5 | 页面适配 | 用于短信短链落地 |
| PC端 | 待定 | 考虑在【我的-我的业务】中增加入口 |

### 3.2 水印规则
- 已实名用户：手机号 + 姓名
- 未实名用户：手机号 + 用户ID
- 水印位置：满屏半透明覆盖

### 3.3 数据隔离
- 白名单数据独立存储，不与用户中心数据强关联
- 仅通过手机号做权限校验
- 不校验机构关系、实名状态

---

## 4. 业务流程

```
【业务团队】                  【领导】                 【目标用户】
    |                          |                        |
    |--- 1.创建项目信息 -------->|                        |
    |    (标题/内容/附件/白名单)  |                        |
    |                          |                        |
    |--- 2.提交审批 ------------>|                        |
    |                          |                        |
    |                          |--- 3.审批通过/驳回 ---->|
    |                          |                        |
    |<-- 4.审批通过 -------------|                        |
    |                          |                        |
    |--- 5.系统自动推送 -------------------------------->| 
    |    (短信+APP推送)                                   |
    |                                                    |
    |                                                    |--- 6.登录校验
    |                                                    |    (是否在白名单)
    |                                                    |
    |                                                    |--- 7.查看内容
    |                                                    |    (水印展示)
```

---

## 5. 需要确认的待办

| 序号 | 事项 | 负责人 | 状态 |
|-----|------|--------|------|
| 1 | 效果图确认（舒展） | 产品经理 | 待开始 |
| 2 | 短信模板申请 | 运营 | 待开始 |
| 3 | 短信通道确认 | 技术 | 待确认 |
| 4 | PC端入口位置确认 | 产品 | 待确认 |
| 5 | 具体字段清单（与业务团队确认） | 产品 | 待确认 |
| 6 | 领导汇报（优先级排期） | 项目经理 | 待开始 |

---

## 6. 排除的功能（本次不做）

| 功能 | 原因 |
|------|------|
| 内容编辑（除白名单外） | 避免用户混淆，重新发布更合理 |
| 组织架构选择 | 简化逻辑，直接导手机号 |
| 在线联络功能 | 线下直接对接更高效 |
| 视频上传 | 当前场景以PDF为主 |
| PC端发现入口 | 优先级待定，先保移动端 |
| 用户实名校验 | 仅用手机号匹配，简化流程 |

---

**文档版本**：V1.0  
**创建时间**：2026-02-04  
**最后更新**：2026-02-04  
**创建人**：光荣的铲屎官  
